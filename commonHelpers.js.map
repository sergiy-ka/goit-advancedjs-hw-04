{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Pixabay API\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const fetchPhotos = (query, page, per_page) => {\n  const searchParams = {\n    params: {\n      key: '45255368-572b15c7c49880eb3615da83a',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: per_page,\n    },\n  };\n\n  return axios.get('/api/', searchParams);\n};\n","export const galleryMarkup = data => {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n            <li class=\"gallery__item\">\n                <a href=\"${largeImageURL}\">\n                    <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n                </a>\n                <div class=\"gallery__info\">\n                    <div class=\"gallery__likes gallery__info__item\">\n                        <p class=\"fas fa-heart\">Likes</p>\n                        <span>${likes}</span>\n                    </div>\n                    <div class=\"gallery__views gallery__info__item\">\n                        <p class=\"fas fa-eye\">Views</p>\n                        <span>${views}</span>\n                    </div>\n                    <div class=\"gallery__comments gallery__info__item\">\n                        <p class=\"fas fa-comment\">Comments</p>\n                        <span>${comments}</span>\n                    </div>\n                    <div class=\"gallery__downloads gallery__info__item\">\n                        <p class=\"fas fa-download\">Downloads</p>\n                        <span>${downloads}</span>\n                    </div>\n                </div>\n            </li>\n        `;\n      }\n    )\n    .join('');\n};\n","import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport { fetchPhotos } from './js/pixabay-api';\nimport { galleryMarkup } from './js/render-functions';\n\nconst searchForm = document.querySelector('.js-search-form');\nconst gallery = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.js-loader');\nconst loadMoreBtn = document.querySelector('.js-load-more-btn');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst per_page = 15;\nlet page = 1;\nlet searchValue = '';\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchValue = event.currentTarget.elements.user_query.value.trim();\n    gallery.innerHTML = '';\n    loadMoreBtn.classList.add('is-hidden');\n\n    if (searchValue === '') {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter something to search.',\n        position: 'topRight',\n      });\n\n      searchForm.reset();\n\n      return;\n    }\n\n    page = 1;\n\n    loader.classList.remove('is-hidden');\n    const { data } = await fetchPhotos(searchValue, page, per_page);\n    loader.classList.add('is-hidden');\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n\n      return;\n    }\n\n    gallery.innerHTML = galleryMarkup(data.hits);\n    loadMoreBtn.classList.remove('is-hidden');\n    lightbox.refresh();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load images.',\n      position: 'topRight',\n    });\n\n    loader.classList.add('is-hidden');\n  }\n};\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    loadMoreBtn.classList.add('is-hidden');\n    loader.classList.remove('is-hidden');\n\n    page += 1;\n\n    const { data } = await fetchPhotos(searchValue, page, per_page);\n    loader.classList.add('is-hidden');\n    gallery.insertAdjacentHTML('beforeend', galleryMarkup(data.hits));\n    loadMoreBtn.classList.remove('is-hidden');\n    lightbox.refresh();\n\n    if (page * per_page >= data.totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n\n    let rect = document.querySelector('.gallery__item').getBoundingClientRect();\n    window.scrollBy({\n      top: rect.height * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load more images.',\n      position: 'topRight',\n    });\n\n    loader.classList.add('is-hidden');\n  }\n};\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["axios","fetchPhotos","query","page","per_page","searchParams","galleryMarkup","data","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","searchValue","onSearchFormSubmit","event","iziToast","onLoadMoreBtnClick","rect"],"mappings":"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"}